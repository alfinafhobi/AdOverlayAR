camera:
  index: 0
  backend: "dshow"
  width: 640           # ↓ faster while testing; raise after it works
  height: 360
  fps_target: 30
  autofocus: true
  auto_exposure: true

quality:
  resize_to: [640, 360]
  denoise:
    enable: true
    apply_every: 12    # do less often so texture remains for tracking
    hColor: 4
    hLuma: 6
    templateWindowSize: 7
    searchWindowSize: 21
  sharpen:
    enable: true
    amount: 0.35
    apply_every: 12
  superres:
    enable: false      # keep off until FPS is stable
    model: "EDSR"
    scale: 2
    weights_path: "models/sr/EDSR_x2.pb"

hud:
  show_fps: true
  show_help: true

perf:
  opencv_optimized: true
  num_threads: 0
  downscale_for_detect: 0.75   # 0.55–0.7 is fine
  use_roi_for_detect: true   # easier initial acquire on phones
  roi_pad: 120
  detector_async: true
  detector_queue: 1

tracking:
  detect_interval: 20        # detect less often; track in between
  lk_win: [21,21]                  # bigger window = more robust motion
  lk_max_level: 3             # deeper pyramid for larger moves
  lk_iters: 30
  lk_eps: 0.01
  max_point_error: 3.5
  min_ok_points: 4            # need more than 4 for stable H
  ema_alpha: 0.35
  area_jump_ratio: 0.45
  reproj_err_thresh: 3.0
  # --- robust tracker extras (supported by the tracker.py I gave) ---
  n_features: 140             # seed plenty of points inside quad
  reseed_thresh: 45           # reseed when too few points survive
  reseed_every: 10            # periodic reseed to refresh points
  fb_thresh: 0.9              # forward–backward LK check (lower = stricter)

debug:
  force_overlay_on_bbox: true

render:
  opacity: 1.0
  fit_mode: "cover"
  feather: 3
  brightness_mix: 0.40        # <- FIXED (was 03)
  canvas_scale: 1.2
  warp_interp: "cubic"        # good balance of quality/speed
  edge_boost: 0.1
